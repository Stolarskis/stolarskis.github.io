<!doctype html><html><head><title>Making Cool Graphs</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/layouts/main.css><link rel=stylesheet href=/css/navigators/navbar.css><link rel=stylesheet href=/css/plyr.css><link rel=stylesheet href=/css/flag-icon.min.css><link href="https://fonts.googleapis.com/css2?family=Muli:wght@300;400;500;600" rel=stylesheet><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css><meta property="og:title" content="Making Cool Graphs"><meta property="og:description" content="Using data collected to make graphs"><meta property="og:type" content="article"><meta property="og:url" content="https://stolarskis.github.io/posts/goplant/makingcoolgraphs/"><meta property="article:published_time" content="2021-12-01T00:00:00+00:00"><meta property="article:modified_time" content="2021-12-01T00:00:00+00:00"><meta name=description content="Using data collected to make graphs"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/atom-one-dark.min.css><link rel=stylesheet href=/css/layouts/single.css><link rel=stylesheet href=/css/navigators/sidebar.css><link rel=stylesheet href=/css/style.css></head><body data-spy=scroll data-target=#TableOfContents data-offset=80><div class="container-fluid bg-dimmed wrapper"><nav class="navbar navbar-expand-xl top-navbar final-navbar shadow"><div class=container><button class="navbar-toggler navbar-light" id=sidebar-toggler type=button onclick=toggleSidebar()>
<span class=navbar-toggler-icon></span></button>
<a class=navbar-brand href=/>Scott Stolarski's Portfolio</a>
<button class="navbar-toggler navbar-light" id=toc-toggler type=button onclick=toggleTOC()>
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse lang-selector" id=top-nav-items><ul class="navbar-nav ml-auto"></ul></div></div></nav><section class=sidebar-section id=sidebar-section><div class=sidebar-holder><div class=sidebar id=sidebar><form class=mx-auto method=get action=/search><input type=text name=keyword placeholder=Search data-search id=search-box></form><div class=sidebar-tree><ul class=tree id=tree><li id=list-heading><a href=/posts data-filter=all>Posts</a></li><div class=subtree><li><i class="fas fa-minus-circle"></i><a class=active href=/posts/goplant/>Goplant</a><ul class=active><li><a href=/posts/goplant/projectsummary/ title="Goplant Project Description">Goplant Project Description</a></li><li><a href=/posts/goplant/firsttest/ title="Goplant's First Test">Goplant's First Test</a></li><li><a class=active href=/posts/goplant/makingcoolgraphs/ title="Making Cool Graphs">Making Cool Graphs</a></li></ul></li></div></ul></div></div></div></section><section class=content-section id=content-section><div class=content><div class="container p-0 read-area"><div class="hero-area col-sm-12" id=hero-area style=background-image:url(https://stolarskis.github.io/posts/goplant/makingcoolgraphs/v1Graphs/lightThumbnail.png)></div><div class=page-content><div class="author-profile ml-auto align-self-lg-center"><img class=rounded-circle src=/images/author/scott_hu96a466cd49717ff01ff875c82e3dcffb_683897_120x120_fit_q75_box.jpeg alt="Author Image"><h5 class=author-name>Scott Stolarski</h5><p>December 1, 2021</p></div><div class=title><h1>Making Cool Graphs</h1></div><div class=post-content id=post-content><h2 id=plotting-data>Plotting Data</h2><h5 id=note-on-the-data>Note on the data</h5><p>The data being plotted was from a twenty four hour test that I setup in the previous post. It turned out to be a 72 hour test because I left it running by accident. This test was setup inside during a particularly cloudy week, data results may vary. The extra data turned out to be a huge help when looking at the correlations of the final lines.</p><h4 id=creating-the-first-script>Creating the first script</h4><p>I started with a super simple script that generated three different graphs, one with sensor type. In order to plot each data frame, I had to do convert the output from the microcrontroller analog port to a percentage (the analog port outputs a number between 0-1023) and convert the date to something pyplot can recognize.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python3 data-lang=python3>
  <span style=color:#75715e>#Read data</span>
  df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>read_csv(<span style=color:#e6db74>&#39;./data/&lt;FileName&gt;.csv&#39;</span>)
  <span style=color:#75715e>#Convert value column to percentage</span>
  df[<span style=color:#e6db74>&#39;value&#39;</span>] <span style=color:#f92672>=</span> df[<span style=color:#e6db74>&#39;value&#39;</span>]<span style=color:#f92672>.</span>apply(convertValueToPercentage)
  <span style=color:#75715e>#Convert record time into something pyplot can read</span>
  df[<span style=color:#e6db74>&#39;recordtime&#39;</span>] <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>to_datetime(df[<span style=color:#e6db74>&#39;recordtime&#39;</span>])
  <span style=color:#75715e>#Plot it!</span>
  df<span style=color:#f92672>.</span>plot(x<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;recordtime&#34;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;value&#39;</span>, label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;LineName&gt;&#34;</span>)

</code></pre></div><h4 id=plotting-all-lines-on-one-graph>Plotting all lines on one graph</h4><p>Having three separate graphs isn&rsquo;t very intuitive for comparing all the different lines at once. I want to super impose all three lines. This will make it super easy to see any correlations between the lines. The first step to doing this is plot all three lines on the same graph. To do this I used the &lsquo;ax&rsquo; parameter.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python3 data-lang=python3>
  graph <span style=color:#f92672>=</span> soilMoisture<span style=color:#f92672>.</span>plot(x<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;recordtime&#34;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;value&#39;</span>, label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Soil Moisture&#34;</span>)
  graph <span style=color:#f92672>=</span> soilTemp<span style=color:#f92672>.</span>plot(ax<span style=color:#f92672>=</span>graph, x<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;recordtime&#34;</span>,y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;value&#39;</span>, label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Soil Temperature&#34;</span>)
  graph <span style=color:#f92672>=</span> light<span style=color:#f92672>.</span>plot(<span style=color:#f92672>*</span>ax<span style=color:#f92672>=</span>graph<span style=color:#f92672>*</span>, x<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;recordtime&#34;</span>, y<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;value&#39;</span>, label<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Light&#34;</span>)

</code></pre></div><img src=/posts/goplant/makingcoolgraphs/v2Graphs/threeLineGraph.png alt="Three Line Graph" width=800 height=600><h4 id=superimposing-each-line>Superimposing each line</h4><p>Next, to superimpose each line, I zeroed each line by subtracting the first value in the first row from every value in the data set. This brings each line down to 0.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python3 data-lang=python3>soilTLineShiftAmount <span style=color:#f92672>=</span> soilTemp<span style=color:#f92672>.</span>iloc[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>value
soilMLineShiftAmount <span style=color:#f92672>=</span> soilMoisture<span style=color:#f92672>.</span>iloc[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>value
lightShiftAmount <span style=color:#f92672>=</span> light<span style=color:#f92672>.</span>iloc[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>.</span>value

<span style=color:#75715e># Correct each line so that they overlap</span>
soilMoisture[<span style=color:#e6db74>&#39;value&#39;</span>] <span style=color:#f92672>=</span> soilMoisture[<span style=color:#e6db74>&#39;value&#39;</span>]<span style=color:#f92672>.</span>apply(shiftSoilMoistureLine)
soilTemp[<span style=color:#e6db74>&#39;value&#39;</span>] <span style=color:#f92672>=</span> soilTemp[<span style=color:#e6db74>&#39;value&#39;</span>]<span style=color:#f92672>.</span>apply(shiftSoilTempLine)
light[<span style=color:#e6db74>&#39;value&#39;</span>] <span style=color:#f92672>=</span> light[<span style=color:#e6db74>&#39;value&#39;</span>]<span style=color:#f92672>.</span>apply(shiftLightLine)
</code></pre></div><h4 id=final-product>Final Product</h4><img src=/posts/goplant/makingcoolgraphs/v2Graphs/finalGraph.png alt="Final Graph" width=800 height=600><p>With all the lines super imposed on each other, you clearly see correlations between them. The final graph turned out way better than I expected it to!</p><h2 id=conclusions-on-data>Conclusions on Data</h2><h4 id=light-and-soil-temperature>Light and Soil Temperature</h4><p>Its worth noting that this data was taken inside during a very cloudy week. I say this because, going in, I expected the data to not make much sense. I was testing if the system would work for an extended period of time without supervision. Surprisingly, in spite of this, the soil temperature follows the day/night cycle enough to see it in the graph! The soil temperature should mirror the light intensity with a significant delay and it does this in the graph. While not as clean cut as I would like, still its exciting to see this correlation in the first attempt at collecting data.</p><h4 id=soil-moisture>Soil Moisture</h4><p>This one i&rsquo;m not sure what happened. I know its working because at the start of the test I watered the plant, in order to test the sensor. The pot&rsquo;s runoff got clogged somehow and the water just sat there for days. I hadn&rsquo;t expected it to go up, almost steadily, for days. It could be that the water was absorbed by the soil evenly over time, or the sensor isn&rsquo;t working properly. To start from 20% and go up by another 15% over the course of two days is worth looking into.</p><h2 id=next-steps>Next Steps</h2><ul><li><p>I have some sensors in an arduino kit I bought awhile back for measuring air temperature. It a digital sensor so I can throw it on any of the microcontrollers. Then its a simple matter of updating the firmware to make the requests along side the analog sensor POST requests.</p></li><li><p>To reach the MVP with this project, I need to setup the sensors outside for a full week. This is going to be a challenge because I need to setup goplant on the cloud for 24/7 access to the api and somehow make my sensors waterproof.</p></li></ul></div><div class="row pl-3 pr-3"><div class="col-md-6 share-buttons"></div><div class="col-md-6 btn-improve-page"><a href=https://github.com/hugo-toha/hugo-toha.github.io/edit/main/content/posts/goplant/makingcoolgraphs/index.md title="Improve this page" target=_blank rel=noopener><i class="fas fa-code-branch"></i>Improve this page</a></div></div><hr><div class="row next-prev-navigator"><div class="col-md-6 previous-article"><a href=/posts/goplant/firsttest/ title="Goplant's First Test" class="btn btn-outline-info"><div><i class="fas fa-chevron-circle-left"></i>Prev</div><div class=next-prev-text>Goplant's First Test</div></a></div></div><hr></div></div></div><a id=scroll-to-top class=btn><i class="fas fa-chevron-circle-up"></i></a></section><section class=toc-section id=toc-section><div class=toc-holder><h5 class="text-center pl-3">Table of Contents</h5><hr><div class=toc><nav id=TableOfContents><ul><li><a href=#plotting-data>Plotting Data</a><ul><li><ul><li><ul><li><a href=#note-on-the-data>Note on the data</a></li></ul></li><li><a href=#creating-the-first-script>Creating the first script</a></li><li><a href=#plotting-all-lines-on-one-graph>Plotting all lines on one graph</a></li><li><a href=#superimposing-each-line>Superimposing each line</a></li><li><a href=#final-product>Final Product</a></li></ul></li></ul></li><li><a href=#conclusions-on-data>Conclusions on Data</a><ul><li><ul><li><a href=#light-and-soil-temperature>Light and Soil Temperature</a></li><li><a href=#soil-moisture>Soil Moisture</a></li></ul></li></ul></li><li><a href=#next-steps>Next Steps</a></li></ul></nav></div></div></section></div><footer class="container-fluid text-center align-content-center footer pb-2"><div class="container pt-5"><div class="row text-left"><div class="col-md-4 col-sm-12"><h5>Navigation</h5><ul><li class=nav-item><a class=smooth-scroll href=/#about>About</a></li><li class=nav-item><a class=smooth-scroll href=/#skills>Skills</a></li><li class=nav-item><a class=smooth-scroll href=/#experiences>Experiences</a></li><li class=nav-item><a class=smooth-scroll href=/#education>Education</a></li></ul></div><div class="col-md-4 col-sm-12"><h5>Contact me:</h5><ul><li><span>Email:</span> <span>csstolarski@gmail.com</span></li></ul></div></div></div><hr><div class=container><div class="row text-left"><div class=col-md-4><a id=theme href=https://github.com/hossainemruz/toha target=_blank rel=noopener><img src=/images/theme-logo_hu8376fd15465fef26ffe66b6bcf0ca686_13669_32x0_resize_box_2.png alt="Toha Theme Logo">
Toha</a></div><div class="col-md-4 text-center">Â© 2021 Copyright.</div><div class="col-md-4 text-right"><a id=hugo href=https://gohugo.io/ target=_blank rel=noopener>Powered by
<img src=/images/hugo-logo.svg alt="Hugo Logo" height=18></a></div></div></div></footer><script type=text/javascript src=/js/jquery-3.4.1.min.js></script><script type=text/javascript src=/js/popper.min.js></script><script type=text/javascript src=/js/bootstrap.min.js></script><script type=text/javascript src=/js/navbar.js></script><script type=text/javascript src=/js/plyr.js></script><script type=text/javascript src=/js/main.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js></script><script src=/js/single.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>